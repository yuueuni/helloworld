# part1-3
- 저장소와 검색

- 로그 구조(log-structured) 계열 저장소 엔진
  - B tree
- 페이지 지향(page-oriented) 계열 저장소 엔진
  - ?

- 색인(index): 특정 키의 값을 효율적으로 찾기 위한 데이터 구조
  - 데이터베이스의 내용에는 영향을 미치지 않으며, 질의 성능에만 영향을 줌
  - 추가적인 구조의 유지보수는 쓰기 과정에서 오버헤드가 발생함

## 해시 색인
- 해시 맵(hash map) (해시 테이블, hash table)로 구현하는 키-값 데이터 색인
- 프로그래밍 언어에서 볼 수 있는 사전 타입(dictionary type)과 매우 유사
장점
- 추가, 세그먼트 병합: 순차적인 쓰기 작업으로 무작위 쓰기 보다 빠름
- 세그머트 파일이 추가 전용이나 불변이면 동시성과 고장 복구는 훨씬 간단함
- 오래된 세그먼트 병합은 시간이 지남에 따라 조각화되는 데이터 파일 문제를 피할 수 있음
단점
- 해시 테이블은 메모리에 저장해야 하므로 키가 너무 많으면 문제가 됨
- 무작위 접근 I/O가 많이 필요하고 디스크가 가득 찼을 때 확장하는 비용이 비쌈
- 해시 충돌 해소를 위해 별도 로직이 필요
-

- 컴팩션: 데이터 파일 세그먼트를 컴팩션 과정을 통해 중복된 키를 버리고 최신 갱신 값만 유지하는 것

## LSM 트리, B 트리

### SS테이블
- Sorted String Table 정렬된 문자열 테이블
- 키로 정렬된 형식

### LSM Tree
- Log-Structured Merge-Tree, 로그 구조화 병합 트리
- LSM 저장소 엔진: 정렬된 파일 병합과 컴팩션 원리를 기반으로 하는 저장소 엔진

### B Tree
- SS 테이블과 같이 키로 정렬된 키-값쌍 유지하여 키-값 검색과 범위 질의에 효율적인 점 비슷
- 고정 크기 블록이나 페이지로 나누고 한 번에하나의 페이지에 읽기 또는 쓰기

### LSM 트리 vs B 트리
- LSM 트리: 쓰기에 빠름
- B 트리: 읽기에 빠름

## 성능 최적화
- 블룸 필터


- 온라인 트랜잭션 처리 (OLTP, online transaction processing), 트랜잭션 처리 최적화
- 온라인 분석 처리 (OLAP, online analytic processing), 분석 최적화
- 사용자 측면, 대량 요청 받음
- 질의마다 작은 수의 레코드 다루며 키의 일부만 사용하는 레코드 요청 (색인 사용)
- 디스크 탐색 병목

## 분석 최적화 (OLAP)
- 데이터 웨어하우스 (Data WareHouse)
  - 분석 시스템에 주로 사용
  - 수백만 개의 레코드 스캔하며 적은 수의 질의지만 복잡한 질의
  - 디스크 대역폭 병목
- 칼럼 지향 저장소 ?
  - 데이터 부호화로 디스크가 읽는 데이터 양 최소화
  - 모든 값을 하나의 로우에 함께 저장하지 않는 대신 각 컬럼별로 모든 값을 함께 저장

